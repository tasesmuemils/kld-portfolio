---
import Hero from "./Hero";
import video_10 from "../assets/video_10.mp4";
import MainText from "../components/mainText.astro";
---

<div class="relative mx-12 mb-32 flex flex-col items-center justify-center">
  <Hero client:load />
  <div class="relative">
    <MainText />
  </div>
</div>

<style>
  #border-path {
    animation: draw 1s forwards ease-out;
  }

  @keyframes draw {
    to {
      stroke-dashoffset: 0;
    }
  }
</style>

<script>
  function updatePath() {
    const textMain = document.querySelector("#anim-p");
    const path = document.querySelector("#border-path");

    if (textMain && path) {
      path.setAttribute(
        "d",
        `M0,0 V${textMain.offsetHeight} H${textMain.offsetWidth} v${
          textMain.offsetHeight / 2
        }`
      );
    }

    const pathLength = path.getTotalLength();
    path.style.strokeDasharray = pathLength.toString();
    path.style.strokeDashoffset = pathLength.toString();
  }

  // function incrementCounter(selector, current, target, duration, letter) {
  //   let counter = document.getElementById(selector);
  //   let stepTime = Math.abs(Math.floor(duration / target));
  //   if (current < target && counter) {
  //     current++;
  //     counter.innerText = current.toString() + letter;
  //     setTimeout(
  //       () => incrementCounter(selector, current, target, duration, letter),
  //       stepTime
  //     );
  //   }
  // }

  // incrementCounter("art-counter", 0, 85, 1000, "");
  // incrementCounter("youtube-counter", 0, 85, 1200, "m");
  // incrementCounter("reviews-counter", 0, 50, 1000, "");

  window.addEventListener("DOMContentLoaded", updatePath);
  window.addEventListener("resize", updatePath);
</script>
